<!-- mini_insta/templates/mini_insta/base.html -->
<!-- Ting Shing Liu, 9/25/25 -->
<!-- Base page template for the mini insta webpage -->

{% load static %}

<html>
    <head>
        <title>Mini Insta</title>
        <!--Reference to the new css for this app-->
        <link rel="stylesheet" href="{% static 'styles-mini-insta.css' %}">
    </head>
    <body>
        <head>
            <!--If condition to determine what header is displayed. If in profile, it will display profile username, if in post, display profile,
            else display show all profiles-->
            {% if profile %}
            <h1>Mini Insta: {{profile.username}}</h1>
            {% elif post %}
            <h1>Mini Insta: {{post.profile}}</h1>
            {% else %}
            <h1>Mini Insta: Showing All Profiles</h1>
            {% endif %}

            <!-- show who's logged in -->
            {% if request.user.is_authenticated %}
            Logged in user: {{ request.user }}.
            {% else %}
            Not logged in.
            {% endif %}
        </head>

        {% block content %}
        {% endblock %}
    </body>
    <footer>
        <!-- Make the navigation in the Footer -->
        <nav>
            <ul>
                <li>
                    {% if profile %}
                        <!-- If a profile is in context, link to their feed and profile page -->
                        {% if request.user == profile.user %}
                        <a href="{% url 'show_feed' %}">Home (Feed)</a>
                        <a href="{% url 'show_my_profile' %}"> | My Profile</a>
                        <a href="{% url 'create_post' %}"> | Create Post</a>
                        <a href="{% url 'search' %}"> | Search</a>
                        <form action="{% url 'logout' %}" method="post" style="display: inline;">
                            {% csrf_token %}
                            <button type="submit" class="action-button">| Log out</button>
                        </form>
                        {% elif request.user.is_authenticated %}
                        <a href="{% url 'show_my_profile' %}"> My Profile</a>
                        <a href="{% url 'search' %}"> | Search</a>
                        <form action="{% url 'logout' %}" method="post" style="display: inline;">
                            {% csrf_token %}
                            <button type="submit" class="action-button">| Log out</button>
                        </form>
                        {% else %}
                        <a href="{% url 'login' %}"> | Log in to Create Post and Search</a>
                        {% endif %}
                    {% else %}
                        <!-- Default link if no specific profile is in context -->
                        <a href="{% url 'show_all_profiles' %}">Home (All Profiles)</a>
                        {% if request.user.is_authenticated %}
                        <a href="{% url 'show_my_profile' %}"> | My Profile</a>
                        <form action="{% url 'logout' %}" method="post" style="display: inline;">
                            {% csrf_token %}
                            <button type="submit" class="action-button">| Log out</button>
                        </form>
                        {% else %}
                        <a href="{% url 'login' %}"> | Log in</a>
                        {% endif %}
                    {% endif %}
                </li>
            </ul>
        </nav>
    </footer>
</html>